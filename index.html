<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>3DD.Dev - 3D Design Development (CAD)</title>
		<meta name="description" content="3D Design development (CAD) in Javascript code">
		<link rel="stylesheet" href="css/index.css">
		<link rel="shortcut icon" href="data:image/x-icon;," type="image/x-icon"> 
        <script src="js/jquery-3.6.0.min.js"></script>
		<!-- <script src="js/three.min.js"></script> -->
		<script src="js/ace/ace.js" type="text/javascript" charset="utf-8"></script>
		<script src="js/ace/mode-javascript.js" type="text/javascript" charset="utf-8"></script>
		<script src="js/ace/theme-twilight.js" type="text/javascript" charset="utf-8"></script>
		<script src="js/ace/ext-language_tools.js" type="text/javascript" charset="utf-8"></script>
		<!-- Import maps polyfill -->
		<!-- Remove this when import maps will be widely supported -->
		<script async src="https://unpkg.com/es-module-shims@1.3.6/dist/es-module-shims.js"></script>
		<script type="importmap">
			{
				"imports": {
					"three": "./js/threejs/three.module.js",
					"threeModules/": "./js/threejs/modules/",
					"OctreeCSG/": "./js/OctreeCSG/",
					"three-csg": "./js/three-csg/three-csg.js",
					"three-mesh-bvh": "./js/three-mesh-bvh/three-mesh-bvh.module.js"
				}
			}
		</script>
		<script type="module">
        	// import { OrbitControls } from '/js/OrbitControls.js';
			// import { STLExporter } from '/js/STLExporter.js';
			// import { OBJExporter } from '/js/OBJExporter.js';
			// import * as BGU from '/js/BufferGeometryUtils.js';
			// import { STLLoader } from '/js/STLLoader.js';
			import { GUI } from '/js/dat.gui.module.js';
			// import CSG from '/js/three-csg/three-csg.js';
			import * as Cookies from '/js/js.cookie.min.js';
			import { GD3DD } from '/js/3dd.js';
			import { Shapes } from '/js/3ddShapes.js';
			import Utils from '/js/3ddUtils.js';
			// import * as BVH from '/js/three-mesh-bvh.module.js';
			
			
			


			// THREE.VertexNormalsHelper = VertexNormalsHelper;
			// THREE.VertexTangentsHelper = VertexTangentsHelper;
			// THREE.BufferGeometryUtils = BufferGeometryUtils;
			var gd3dd = new GD3DD(Shapes, Utils, GUI);
			gd3dd.start();
			$('document').ready(() => {
				gd3dd.documentReady();
			});
			$(window).bind("resize", () => {
				gd3dd.windowResizeCallback();
			});
		</script>
		<!-- Global site tag (gtag.js) - Google Analytics -->
		<script async src="https://www.googletagmanager.com/gtag/js?id=G-K6MYWMLWH8"></script>
		<script>
			window.dataLayer = window.dataLayer || [];
			function gtag(){dataLayer.push(arguments);}
			gtag('js', new Date());

			gtag('config', 'G-K6MYWMLWH8');
		</script>
	</head>
	<body>
		<div id="body">
			<div id="headerDiv">
				<div id="titleDiv">
					3DD.Dev
				</div>
				<div id="controlButtons">
					<button id="exportSTLBinary">Export Binary STL</button>
					<!-- <button id="exportOBJ">Export OBJ</button> -->
					<button id="exportSTLASCII">Export ASCII STL</button>
					<button id="startARBtn">Start AR</button>
					<button id="sculptBtn">Sculpt</button>
					<button id="shareBtn" style="display: none;">Share</button>
					<div><input type="checkbox" id="lightsCheckbox" name="lightsCheckbox" checked><label for="lightsCheckbox" title="Turn point lights on/off">Lights</label></div>
				</div>
				<div id="linksDiv">
					<a href="https://github.com/giladdarshan/3dd.dev/blob/main/README.md" target="_blank" id="readMeLink">Read Me</a>
				</div>
			</div>
			<div id="bodyDiv">
				<div id="leftDiv">
					<div id="leftDivControls">
						<div class="leftDivControlsLayer">
							<div>
								<input type="checkbox" id="showGridCheckbox" name="showGridCheckbox" checked="checked">
								<label for="showGridCheckbox">Show Grid</label>
							</div>
							<div>
								<input type="checkbox" id="continuousModeCheckbox" name="continuousModeCheckbox">
								<label for="continuousModeCheckbox" title="Do not clear scene between code runs">Continuous Mode</label>
							</div>
							<div>
								<button id="importSTLBtn">Import STL</button>
								<input type="file" id="loadSTLInput" accept=".stl">
							</div>
						</div>
						<div class="leftDivControlsLayer">
							<div id="continuousModeOptions">
								<input type="checkbox" id="clearCodeCheckbox" name="clearCodeCheckbox" checked="checked">
								<label for="clearCodeCheckbox">Clear Code</label>
							</div>
						</div>
					</div>
					<textarea id="processedCode" readonly></textarea>
					<div id="code" autocapitalize="none" spellcheck="false"></div>
					<button id="runCodeBtn">Run Code</button>
				</div>
				<div id="mainDivBorder"> </div>
				<div id="rightDiv">
					<div id="mainDiv"></div>
					<div id="outputDiv"><label for="outputText" id="outputTextLabel">Output:</label><textarea id="outputText" name="outputText" readonly></textarea></div>
				</div>
			</div>
			<div id="footerDiv">
				<div id="contactDetails">Developed by <a href="mailto:gilad@activedesign.co.il">Gilad Darshan</a></div>
			</div>
		</div>
		<div id="readMeLinkPopup">
			First time visitor?<br />
			Head over to the Read Me page!
		</div>
		<div id="renderingOverlay">
			<h1><div id="renderingOverlayText">Rendering</div></h1>
			<div id="overlayLoadingSpinner"></div>
		</div>
	</body>
</html>